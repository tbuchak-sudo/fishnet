 <!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FishNet ‚Äî –°–æ—Ü–º–µ—Ä–µ–∂–∞ –¥–ª—è —Ä–∏–±–∞–ª–æ–∫</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #15803d;
            --primary-dark: #166534;
        }
        body {
            background-color: #f8fafc;
            font-family: 'Inter', -apple-system, sans-serif;
        }
        .glass-nav {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }
        .post-card {
            transition: transform 0.2s ease;
        }
        .post-card:hover {
            transform: translateY(-2px);
        }
        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #ccc; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #999; }
    </style>
</head>
<body class="text-slate-900">

    <!-- –ù–∞–≤—ñ–≥–∞—Ü—ñ—è -->
    <nav class="glass-nav sticky top-0 z-50 border-b border-slate-200 px-4 py-2.5">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-2 cursor-pointer" onclick="location.reload()">
                <div class="bg-green-700 p-2 rounded-xl text-white shadow-lg shadow-green-200">
                    <i class="fas fa-fish-symbol fa-lg"></i>
                </div>
                <h1 class="text-2xl font-black tracking-tight text-green-800 hidden sm:block">FishNet</h1>
            </div>
            
            <div class="flex-1 max-w-lg mx-8 hidden md:block">
                <div class="relative">
                    <input type="text" placeholder="–ü–æ—à—É–∫ –∑–≤—ñ—Ç—ñ–≤, –≤–æ–¥–æ–π–º, –¥—Ä—É–∑—ñ–≤..." class="w-full bg-slate-100 border-none rounded-2xl py-2 px-10 focus:ring-2 focus:ring-green-500 transition-all outline-none">
                    <i class="fas fa-search absolute left-4 top-3 text-slate-400"></i>
                </div>
            </div>

            <div class="flex items-center gap-3 sm:gap-6">
                <button class="p-2 text-slate-500 hover:bg-slate-100 rounded-xl transition"><i class="fas fa-home text-xl"></i></button>
                <button class="p-2 text-slate-500 hover:bg-slate-100 rounded-xl transition relative">
                    <i class="fas fa-bell text-xl"></i>
                    <span class="absolute top-1.5 right-1.5 bg-red-500 w-2.5 h-2.5 rounded-full border-2 border-white"></span>
                </button>
                <div class="flex items-center gap-3 pl-2 border-l border-slate-200">
                    <div class="text-right hidden sm:block">
                        <p id="user-name-nav" class="text-sm font-bold leading-none">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
                        <p class="text-[10px] text-slate-400 font-mono" id="user-id-nav"></p>
                    </div>
                    <div class="w-10 h-10 rounded-xl border-2 border-green-600 overflow-hidden cursor-pointer hover:opacity-80 transition" id="user-avatar">
                        <img src="" class="w-full h-full object-cover" alt="Profile">
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="max-w-6xl mx-auto mt-6 grid grid-cols-1 md:grid-cols-12 gap-8 px-4 pb-20">
        
        <!-- –õ—ñ–≤–∞ –ø–∞–Ω–µ–ª—å (–ü—Ä–æ—Ñ—ñ–ª—å) -->
        <aside class="hidden lg:block lg:col-span-3 space-y-6">
            <div class="bg-white rounded-2xl p-6 shadow-sm border border-slate-200 overflow-hidden relative">
                <div class="absolute top-0 left-0 w-full h-16 bg-gradient-to-r from-green-600 to-teal-600"></div>
                <div class="relative pt-4 text-center">
                    <div class="w-20 h-20 mx-auto rounded-2xl border-4 border-white shadow-md overflow-hidden bg-white mb-3">
                        <img id="side-profile-img" src="" class="w-full h-full" alt="Avatar">
                    </div>
                    <h2 id="user-display-name" class="font-bold text-xl text-slate-800">...</h2>
                    <p class="text-sm text-slate-500 mb-6">–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π —Ä–∏–±–∞–ª–∫–∞</p>
                    
                    <div class="grid grid-cols-3 gap-2 py-4 border-y border-slate-50">
                        <div><p class="font-black text-slate-800">0</p><p class="text-[10px] uppercase tracking-wider text-slate-400">–ü–æ—Å—Ç–∏</p></div>
                        <div><p class="font-black text-slate-800">12</p><p class="text-[10px] uppercase tracking-wider text-slate-400">–ö–ª—å–æ–≤</p></div>
                        <div><p class="font-black text-slate-800">4</p><p class="text-[10px] uppercase tracking-wider text-slate-400">–î—Ä—É–∑—ñ</p></div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-2xl p-2 shadow-sm border border-slate-200">
                <p class="px-4 py-2 text-xs font-bold text-slate-400 uppercase tracking-widest">–ú–µ–Ω—é</p>
                <a href="#" class="flex items-center gap-3 p-3 hover:bg-slate-50 rounded-xl text-slate-700 font-medium transition group">
                    <span class="w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center text-green-600 group-hover:bg-green-600 group-hover:text-white transition">
                        <i class="fas fa-map-marked-alt"></i>
                    </span> –ö–∞—Ä—Ç–∞ –≤–æ–¥–æ–π–º
                </a>
                <a href="#" class="flex items-center gap-3 p-3 hover:bg-slate-50 rounded-xl text-slate-700 font-medium transition group">
                    <span class="w-8 h-8 rounded-lg bg-orange-50 flex items-center justify-center text-orange-600 group-hover:bg-orange-600 group-hover:text-white transition">
                        <i class="fas fa-shopping-bag"></i>
                    </span> –†–∏–±–∞–ª—å—Å—å–∫–∏–π –º–∞—Ä–∫–µ—Ç
                </a>
            </div>
        </aside>

        <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞ —Å—Ç—Ä—ñ—á–∫–∞ -->
        <div class="col-span-1 md:col-span-12 lg:col-span-6 space-y-6">
            
            <!-- –ü–æ–ª–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ—Å—Ç–∞ -->
            <div class="bg-white rounded-2xl p-5 shadow-sm border border-slate-200">
                <div class="flex gap-4">
                    <img id="post-creator-img" src="" class="w-12 h-12 rounded-xl" alt="User">
                    <button onclick="openModal()" class="flex-1 bg-slate-50 hover:bg-slate-100 text-left px-5 py-3 rounded-2xl text-slate-500 transition-all font-medium border border-slate-100">
                        –Ø–∫–∏–π —É–ª–æ–≤ —Å—å–æ–≥–æ–¥–Ω—ñ, <span class="user-first-name">—Ä–∏–±–∞–ª–∫–æ</span>?
                    </button>
                </div>
                <div class="flex justify-between mt-5 pt-4 border-t border-slate-50">
                    <button class="flex items-center gap-2 text-slate-600 hover:bg-blue-50 hover:text-blue-600 px-4 py-2 rounded-xl transition font-semibold text-sm">
                        <i class="fas fa-image"></i> –§–æ—Ç–æ
                    </button>
                    <button class="flex items-center gap-2 text-slate-600 hover:bg-red-50 hover:text-red-600 px-4 py-2 rounded-xl transition font-semibold text-sm">
                        <i class="fas fa-location-dot"></i> –õ–æ–∫–∞—Ü—ñ—è
                    </button>
                    <button class="flex items-center gap-2 text-slate-600 hover:bg-yellow-50 hover:text-yellow-600 px-4 py-2 rounded-xl transition font-semibold text-sm">
                        <i class="fas fa-tags"></i> –¢–µ–≥–∏
                    </button>
                </div>
            </div>

            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ—Å—Ç—ñ–≤ -->
            <div id="posts-container" class="space-y-6">
                <div class="flex flex-col items-center justify-center py-20 text-slate-400">
                    <div class="relative w-16 h-16 mb-4">
                        <i class="fas fa-fish fa-3x absolute inset-0 animate-ping opacity-20"></i>
                        <i class="fas fa-fish fa-3x relative text-green-200"></i>
                    </div>
                    <p class="font-medium animate-pulse">–ó–∞–∫–∏–¥–∞—î–º–æ –Ω–µ–≤—ñ–¥...</p>
                </div>
            </div>
        </div>

        <!-- –ü—Ä–∞–≤–∞ –ø–∞–Ω–µ–ª—å (–ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å) -->
        <aside class="hidden md:block md:col-span-4 lg:col-span-3 space-y-6">
            <div class="bg-white rounded-2xl p-5 shadow-sm border border-slate-200">
                <h3 class="font-black text-slate-800 mb-4 flex items-center justify-between uppercase text-xs tracking-widest">
                    –ó–∞—Ä–∞–∑ –∫–ª—é—î
                    <span class="flex h-2 w-2 relative">
                        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span>
                        <span class="relative inline-flex rounded-full h-2 w-2 bg-red-500"></span>
                    </span>
                </h3>
                <div class="space-y-4">
                    <div class="flex items-center gap-3 p-2 hover:bg-slate-50 rounded-xl transition cursor-pointer">
                        <div class="w-10 h-10 rounded-lg bg-blue-500 flex items-center justify-center text-white font-bold italic">
                            –©
                        </div>
                        <div>
                            <p class="text-sm font-bold">–©—É–∫–∞</p>
                            <p class="text-[10px] text-green-600 font-bold">–í–ò–°–û–ö–ê –ê–ö–¢–ò–í–ù–Ü–°–¢–¨</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-3 p-2 hover:bg-slate-50 rounded-xl transition cursor-pointer">
                        <div class="w-10 h-10 rounded-lg bg-orange-400 flex items-center justify-center text-white font-bold italic">
                            –ö
                        </div>
                        <div>
                            <p class="text-sm font-bold">–ö–æ—Ä–æ–ø</p>
                            <p class="text-[10px] text-slate-400 font-bold uppercase">–°–µ—Ä–µ–¥–Ω—è</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-slate-900 text-white rounded-2xl p-6 shadow-xl relative overflow-hidden">
                <i class="fas fa-anchor absolute -bottom-4 -right-4 text-white opacity-10 fa-6x rotate-12"></i>
                <h4 class="font-bold mb-2">FishNet Pro</h4>
                <p class="text-xs text-slate-400 mb-4 leading-relaxed">–û—Ç—Ä–∏–º–∞–π—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ —Å–µ–∫—Ä–µ—Ç–Ω–∏—Ö —Ç–æ—á–æ–∫ –∫–ª—å–æ–≤—É —Ç–∞ –¥–µ—Ç–∞–ª—å–Ω–∏—Ö –∫–∞—Ä—Ç –≥–ª–∏–±–∏–Ω.</p>
                <button class="w-full bg-green-600 hover:bg-green-500 text-white py-2.5 rounded-xl font-bold text-sm transition shadow-lg shadow-green-900/20">
                    –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ
                </button>
            </div>
        </aside>

    </main>

    <!-- –ú–æ–¥–∞–ª–∫–∞ -->
    <div id="modal" class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm hidden items-center justify-center z-[100] p-4">
        <div class="bg-white rounded-3xl w-full max-w-lg shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-300">
            <div class="px-6 py-4 border-b border-slate-100 flex justify-between items-center">
                <h2 class="text-xl font-black text-slate-800">–ù–æ–≤–∏–π –∑–≤—ñ—Ç</h2>
                <button onclick="closeModal()" class="w-10 h-10 flex items-center justify-center rounded-full hover:bg-slate-100 text-slate-400 transition"><i class="fas fa-times"></i></button>
            </div>
            <div class="p-6">
                <div class="flex items-center gap-3 mb-4">
                    <img id="modal-user-img" src="" class="w-10 h-10 rounded-xl" alt="U">
                    <div>
                        <p id="modal-user-name" class="font-bold text-sm">...</p>
                        <select class="text-[10px] bg-slate-100 border-none rounded-lg py-1 pl-2 pr-6 focus:ring-0 text-slate-500 font-bold uppercase">
                            <option>üåê –ü—É–±–ª—ñ—á–Ω–æ</option>
                            <option>üîí –¢—ñ–ª—å–∫–∏ –¥—Ä—É–∑—ñ</option>
                        </select>
                    </div>
                </div>
                <textarea id="post-text" rows="5" class="w-full border-none focus:ring-0 text-lg placeholder-slate-300 resize-none mb-4" placeholder="–ù–∞ —â–æ –∫–ª—é–Ω—É–ª–æ?"></textarea>
                <div class="bg-slate-50 border-2 border-dashed border-slate-200 rounded-2xl p-6 text-center cursor-pointer hover:border-green-400 hover:bg-green-50 transition-all group" id="upload-zone">
                    <i class="fas fa-cloud-upload-alt text-slate-300 group-hover:text-green-500 text-3xl mb-2 transition"></i>
                    <p class="text-sm font-bold text-slate-400 group-hover:text-green-700">–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∞–±–æ –ø–µ—Ä–µ—Ç—è–≥–Ω—ñ—Ç—å —Ñ–æ—Ç–æ —É–ª–æ–≤—É</p>
                    <input type="text" id="post-image-url" placeholder="–ê–±–æ –≤—Å—Ç–∞–≤—Ç–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ñ–æ—Ç–æ" class="mt-4 w-full bg-white border border-slate-200 rounded-xl p-2 text-xs focus:ring-2 focus:ring-green-500 outline-none">
                </div>
            </div>
            <div class="px-6 py-4 bg-slate-50 flex justify-end">
                <button id="submit-post" class="bg-green-700 hover:bg-green-800 text-white px-10 py-3 rounded-2xl font-black transition-all shadow-lg shadow-green-900/20 disabled:opacity-50">
                    –ó–ê–ö–ò–ù–£–¢–ò –í –°–¢–†–Ü–ß–ö–£
                </button>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, onSnapshot, doc, updateDoc, increment, serverTimestamp, deleteDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = JSON.parse(__firebase_config);
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'fish-net-prod';
        
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        let user = null;
        const postsCol = collection(db, 'artifacts', appId, 'public', 'data', 'posts');

        // –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
        const start = async () => {
            if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                await signInWithCustomToken(auth, __initial_auth_token);
            } else {
                await signInAnonymously(auth);
            }
        };
        start();

        onAuthStateChanged(auth, (u) => {
            if (u) {
                user = u;
                updateUI();
                listenPosts();
            }
        });

        function updateUI() {
            const avatar = `https://api.dicebear.com/7.x/avataaars/svg?seed=${user.uid}`;
            const name = `–†–∏–±–∞–ª–∫–∞ ${user.uid.substring(0, 5)}`;
            
            document.querySelectorAll('#user-avatar img, #side-profile-img, #post-creator-img, #modal-user-img').forEach(img => img.src = avatar);
            document.getElementById('user-name-nav').innerText = name;
            document.getElementById('user-display-name').innerText = name;
            document.getElementById('modal-user-name').innerText = name;
            document.getElementById('user-id-nav').innerText = `ID: ${user.uid.substring(0,8)}`;
            document.querySelectorAll('.user-first-name').forEach(el => el.innerText = name.split(' ')[1]);
        }

        function listenPosts() {
            onSnapshot(postsCol, (snap) => {
                const container = document.getElementById('posts-container');
                const posts = [];
                snap.forEach(d => posts.push({id: d.id, ...d.data()}));
                
                posts.sort((a,b) => (b.createdAt?.seconds || 0) - (a.createdAt?.seconds || 0));

                if(posts.length === 0) {
                    container.innerHTML = `<div class="bg-white rounded-2xl p-12 text-center border-2 border-dashed text-slate-300"><i class="fas fa-anchor fa-3x mb-4"></i><p class="font-bold">–ü–æ–∫–∏ —â–æ —Ç–∏—Ö–æ... –ß–∞—Å –ø–µ—Ä—à–æ–≥–æ –∑–∞–∫–∏–¥—É!</p></div>`;
                    return;
                }

                container.innerHTML = posts.map(p => `
                    <article class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden post-card">
                        <div class="p-4 flex justify-between items-start">
                            <div class="flex items-center gap-3">
                                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=${p.userId}" class="w-10 h-10 rounded-xl bg-slate-100 shadow-sm" alt="U">
                                <div>
                                    <p class="font-black text-sm text-slate-800">–†–∏–±–∞–ª–∫–∞ ${p.userId.substring(0,5)}</p>
                                    <p class="text-[10px] text-slate-400 font-bold uppercase">${p.createdAt ? new Date(p.createdAt.seconds*1000).toLocaleTimeString() : '–©–æ–π–Ω–æ'}</p>
                                </div>
                            </div>
                            ${p.userId === user.uid ? `<button onclick="window.deletePost('${p.id}')" class="text-slate-300 hover:text-red-500 p-2 transition"><i class="fas fa-trash-alt"></i></button>` : ''}
                        </div>
                        <div class="px-5 pb-4 text-slate-700 leading-relaxed font-medium">
                            ${p.content}
                        </div>
                        ${p.imageUrl ? `
                            <div class="bg-slate-100 border-y border-slate-50">
                                <img src="${p.imageUrl}" class="w-full h-auto max-h-[500px] object-contain mx-auto" alt="Catch" onerror="this.parentElement.style.display='none'">
                            </div>
                        ` : ''}
                        <div class="p-4 bg-slate-50/50 flex justify-between items-center border-t border-slate-50">
                            <div class="flex gap-4">
                                <button onclick="window.like('${p.id}')" class="flex items-center gap-2 group transition-all">
                                    <span class="w-9 h-9 flex items-center justify-center rounded-xl bg-white border border-slate-200 text-slate-400 group-hover:bg-green-50 group-hover:text-green-600 group-hover:border-green-200 transition-all">
                                        <i class="fas fa-fish"></i>
                                    </span>
                                    <span class="font-black text-slate-600">${p.likes || 0}</span>
                                </button>
                                <button class="flex items-center gap-2 group">
                                    <span class="w-9 h-9 flex items-center justify-center rounded-xl bg-white border border-slate-200 text-slate-400 group-hover:bg-blue-50 group-hover:text-blue-600 group-hover:border-blue-200 transition">
                                        <i class="fas fa-comment"></i>
                                    </span>
                                    <span class="font-black text-slate-600">0</span>
                                </button>
                            </div>
                        </div>
                    </article>
                `).join('');
            });
        }

        window.like = async (id) => {
            const ref = doc(db, 'artifacts', appId, 'public', 'data', 'posts', id);
            await updateDoc(ref, { likes: increment(1) });
        };

        window.deletePost = async (id) => {
            if(confirm('–í–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ–π –∑–≤—ñ—Ç?')) {
                const ref = doc(db, 'artifacts', appId, 'public', 'data', 'posts', id);
                await deleteDoc(ref);
            }
        };

        document.getElementById('submit-post').onclick = async () => {
            const text = document.getElementById('post-text').value.trim();
            const img = document.getElementById('post-image-url').value.trim();
            const btn = document.getElementById('submit-post');
            
            if(!text) return;

            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> –ó–ê–ö–ò–î–ê–Ñ–ú–û...';

            try {
                await addDoc(postsCol, {
                    userId: user.uid,
                    content: text,
                    imageUrl: img,
                    likes: 0,
                    createdAt: serverTimestamp()
                });
                document.getElementById('post-text').value = '';
                document.getElementById('post-image-url').value = '';
                window.closeModal();
            } finally {
                btn.disabled = false;
                btn.innerHTML = '–ó–ê–ö–ò–ù–£–¢–ò –í –°–¢–†–Ü–ß–ö–£';
            }
        };

        window.openModal = () => document.getElementById('modal').classList.replace('hidden', 'flex');
        window.closeModal = () => document.getElementById('modal').classList.replace('flex', 'hidden');

    </script>
</body>
</html>